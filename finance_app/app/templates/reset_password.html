{% extends "base.html" %}
{% block title %}Đặt lại mật khẩu{% endblock %}
{% block content %}
<section style="max-width: 480px; margin: 24px auto;">
  <h1>Đặt lại mật khẩu</h1>
  <form id="reset-form">
    <label>Token</label>
    <input type="text" name="token" required />
    <label>Mật khẩu mới</label>
    <input type="password" name="new_password" required />
    <button type="submit">Cập nhật</button>
  </form>
  <pre id="out"></pre>
</section>
<script>
document.getElementById('reset-form').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const f = new FormData(e.target);
  const res = await fetch('/auth/reset-password', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ token: f.get('token'), new_password: f.get('new_password') }) });
  document.getElementById('out').textContent = JSON.stringify(await res.json(), null, 2);
});
</script>
{% endblock %}






